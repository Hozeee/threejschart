{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","source/js/module/app.js","source/js/module/source.js","source/js/module/webgl/elevationdata.js","source/js/module/webgl/imageprocessor.js","source/js/module/webgl/map.js","source/js/module/webgl/skybox.js","source/js/module/webgl/terrain.js","source/js/module/webgl/webgl.js"],"names":[],"mappings":"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","file":"app.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import WebGL from './webgl/webgl';\n\nlet appInstance = null;\n\nclass App {\n\tstatic getInstance() {\n\t\tif (!appInstance) {\n\t\t\tappInstance = this;\n\t\t\tApp.init();\n\t\t} else {\n\t\t\tconsole.log('%c [Module - App] - Already created an instance! ', 'background: #ea4118; color: #fff');\n\t\t}\n\t}\n\n\tstatic init() {\n\t\tlet webgl = new WebGL();\n\n\t\twebgl.init();\n\t}\n}\n\nexport default App;\n","import App from './app.js';\n\nwindow.App = App;\n","class ElevationData {\n\tinit() {\n\t\tconsole.log('ElevationData init');\n\t}\n\n\tinitElevationMaps() {\n\t\tthis.elevationData = {};\n\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tthis.loadElevationMap({imageURL: './i/azerelevation_map_small2.jpg', matrix: true})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.elevationData.country = response;\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t});\n\n\n\t}\n\n\tloadElevationMap(data) {\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar img = new Image(),\n\t\t\t\televationData = {};\n\n\t\t\televationData.elevationArray = [];\n\n\t\t\timg.onload = function() {\n\t\t\t\tvar imgCanvas = document.createElement('canvas'),\n\t\t\t\t\tctx = imgCanvas.getContext('2d'),\n\t\t\t\t\timgW = this.width,\n\t\t\t\t\timgH = this.height,\n\t\t\t\t\tpixels,\n\t\t\t\t\tindex = 0,\n\t\t\t\t\tr,\n\t\t\t\t\tg,\n\t\t\t\t\tb,\n\t\t\t\t\ta,\n\t\t\t\t\tsum;\n\n\t\t\t\timgCanvas.width = imgW;\n\t\t\t\timgCanvas.height = imgH;\n\n\t\t\t\televationData.imgW = imgW;\n\t\t\t\televationData.imgH = imgH;\n\n\t\t\t\tctx.drawImage(this, 0, 0);\n\t\t\t\tpixels = ctx.getImageData(0, 0, imgW, imgH).data;\n\n\t\t\t\tfor (var x = 0; x < imgW; x++) {\n\n\t\t\t\t\tif (data.matrix) {\n\t\t\t\t\t\televationData.elevationArray[x] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var y = 0; y < imgH; y++) {\n\t\t\t\t\t\tr = pixels[index];\n\t\t\t\t\t\tg = pixels[index + 1];\n\t\t\t\t\t\tb = pixels[index + 2];\n\t\t\t\t\t\ta = pixels[index + 3];\n\t\t\t\t\t\tindex = (x * 4) + y * (4 * imgW);\n\t\t\t\t\t\tsum = r + g + b;\n\n\t\t\t\t\t\tif (data.matrix) {\n\t\t\t\t\t\t\tif (sum > 43) {\n\t\t\t\t\t\t\t\televationData.elevationArray[x].push({\n\t\t\t\t\t\t\t\t\tx: x - imgW / 2,\n\t\t\t\t\t\t\t\t\ty: y - imgH / 2,\n\t\t\t\t\t\t\t\t\tscale: sum,\n\t\t\t\t\t\t\t\t\tactive: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\televationData.elevationArray[x].push({\n\t\t\t\t\t\t\t\t\tx: x - imgW / 2,\n\t\t\t\t\t\t\t\t\ty: y - imgH / 2,\n\t\t\t\t\t\t\t\t\tscale: sum,\n\t\t\t\t\t\t\t\t\tactive: false\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (sum > 43) {\n\t\t\t\t\t\t\t\televationData.elevationArray.push({\n\t\t\t\t\t\t\t\t\tx: x - imgW / 2,\n\t\t\t\t\t\t\t\t\ty: y - imgH / 2,\n\t\t\t\t\t\t\t\t\tscale: sum,\n\t\t\t\t\t\t\t\t\tactive: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\televationData.elevationArray.push({\n\t\t\t\t\t\t\t\t\tx: x - imgW / 2,\n\t\t\t\t\t\t\t\t\ty: y - imgH / 2,\n\t\t\t\t\t\t\t\t\tscale: 0,\n\t\t\t\t\t\t\t\t\tactive: false\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tresolve(elevationData);\n\n\t\t\t};\n\n\t\t\timg.src = data.imageURL;\n\t\t});\n\n\t}\n\n}\n\nexport default ElevationData;","\nclass ImageProcessor {\n\n\tinit() {\n\t\tthis.gradientImage = new Image();\n\t\tthis.gradientImage.onload = () => {\n\t\t\tthis.createGradientImage();\n\t\t};\n\n\t\tthis.gradientImage.src = '{{ASSET_PREFIX}}i/content/torchgradient.jpg';\n\t}\n\n\tcreateGradientImage() {\n\t\tthis.gradientCanvas = document.createElement('canvas');\n\t\tthis.gradientCanvas.width = this.gradientImage.width;\n\t\tthis.gradientCanvas.height = this.gradientImage.height;\n\n\t\tthis.gradientCanvas.getContext('2d').drawImage(this.gradientImage, 0, 0, this.gradientImage.width, this.gradientImage.height);\n\t}\n\n\tgetColorForPercent(percent) {\n\t\tlet result = '#ffffff';\n\n\t\tif (this.gradientCanvas) {\n\t\t\tresult = this.gradientCanvas.getContext('2d').getImageData(percent * this.gradientImage.width, 0, 1, 1).data;\n\t\t}\n\n\t\treturn result;\n\t}\n\n}\n\nexport default ImageProcessor;","import Terrain3d from './terrain';\n\nclass Map3D {\n\tinit(settings) {\n\t\tthis.scene = settings.scene;\n\t\tthis.camera = settings.camera;\n\n\t\tthis.initWorld();\n\n\t\tthis.terrain3D = new Terrain3d();\n\t\tthis.terrain3D.init({scene: this.worldContainer});\n\t}\n\n\tinitWorld() {\n\t\tthis.world = new THREE.Object3D();\n\t\tthis.world.rotation.y = -Math.PI / 2;\n\t\t//scene.add(world);\n\n\t\tthis.worldContainer = new THREE.Object3D();\n\t\tthis.worldContainer.rotation.x = -Math.PI / 2;\n\t\tthis.world.add(this.worldContainer);\n\t}\n\n\tinitTerrain() {\n\t\tconsole.log('Map initTerrain');\n\n\t\tvar geometry = new THREE.BoxGeometry( 10, 10, 10 );\n\t\tvar material = new THREE.MeshBasicMaterial( {color: 0xffff00} );\n\t\tvar cube = new THREE.Mesh( geometry, material );\n\t\tthis.scene.add( cube );\n\t}\n\n\trender() {\n\t\tif (this.camera) {\n\t\t\tthis.camera.updateMatrix();\n\t\t\tthis.camera.updateMatrixWorld();\n\t\t}\n\t}\n\n}\n\nexport default Map3D;","class SkyBox {\n\tinit(settings) {\n\t\tconsole.log('skybox init');\n\t}\n}\n\nexport default SkyBox;\n","class terrain3D {\n\tinit(settings) {\n\t\tconsole.log('nit terrain3D');\n\t}\n}\n\nexport default terrain3D","import ImageProcessor from './imageprocessor';\nimport Skybox from './skybox';\nimport ElevationData from './elevationdata';\nimport Map3d from './map';\n\nclass WebGl {\n\n\tinit() {\n\t\tthis.scene = new THREE.Scene();\n\n\t\tthis.renderer = new THREE.WebGLRenderer({antialias: true, clearColor: 0x000000});\n\t\tthis.renderer.setSize(window.innerWidth, window.innerHeight);\n\t\tthis.renderer.setClearColor(0x19081b, 1);\n\t\tdocument.getElementById('webgl-content').appendChild(this.renderer.domElement);\n\n\t\tthis.initCamera();\n\t\tthis.initLights();\n\n\t\tthis.skybox = new Skybox();\n\t\tthis.skybox.init({scene: this.scene});\n\n\t\tthis.elevationData = new ElevationData();\n\t\tthis.elevationData.initElevationMaps().then(() => {\n\t\t\tthis.init3dMap();\n\t\t});\n\n\t\tthis.render();\n\n\t\twindow.addEventListener('resize', this.onWindowResize.bind(this), false);\n\t\tthis.inited = true;\n\t\tthis.needRender = true;\n\t}\n\n\tinit3dMap() {\n\t\tthis.map3d = new Map3d();\n\t\tthis.map3d.init({scene: this.scene, camera: this.camera});\n\t\tthis.map3d.initTerrain();\n\t}\n\n\tinitCamera() {\n\t\tthis.camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 10000);\n\t\tthis.camera.position.z = 500;\n\t\tthis.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);\n\t}\n\n\tinitLights() {\n\t\tlet ambientLight = new THREE.AmbientLight(0x222222),\n\t\t\tpointLight;\n\n\t\tthis.scene.add(ambientLight);\n\n\t\tpointLight = new THREE.PointLight(0xffffff, 1, 0);\n\t\tpointLight.position.set(0, 500, 0);\n\t\tthis.scene.add(pointLight);\n\t}\n\n\tonWindowResize() {\n\t\tthis.renderer.setSize(window.innerWidth, window.innerHeight);\n\t\tthis.camera.aspect = window.innerWidth / window.innerHeight;\n\t\tthis.camera.updateProjectionMatrix();\n\t}\n\n\trender() {\n\t\tif (this.needRender) {\n\n\t\t\tif (this.map3d) {\n\t\t\t\tthis.map3d.render();\n\t\t\t}\n\n\t\t\tthis.controls.update();\n\n\t\t\tthis.renderer.render(this.scene, this.camera);\n\t\t}\n\n\t\trequestAnimationFrame(this.render.bind(this));\n\t}\n\n}\n\nexport default WebGl;"]}